<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern CRUD with JavaScript & Bootstrap</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>

<div class="container mt-5">
    <h2>Login</h2>
    <form id="loginForm">
        <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" class="form-control" id="username" required>
        </div>
        <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" class="form-control" id="password" required>
        </div>
        <button type="submit" class="btn btn-primary">Login</button>
    </form>

    <h2 class="mt-5">Register</h2>
    <form id="registerForm">
        <div class="form-group">
            <label for="regUsername">Username:</label>
            <input type="text" class="form-control" id="regUsername" required>
        </div>
        <div class="form-group">
            <label for="regEmail">Email:</label>
            <input type="email" class="form-control" id="regEmail" required>
        </div>
        <div class="form-group">
            <label for="regPassword">Password:</label>
            <input type="password" class="form-control" id="regPassword" required>
        </div>
        <button type="submit" class="btn btn-primary">Register</button>
    </form>

    <h2 class="mt-5">Admin Dashboard</h2>
    <div id="adminSection" class="d-none">
        <h3>Manage Users</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="adminUsersTable"></tbody>
        </table>
    </div>

    <h2 class="mt-5">User Dashboard</h2>
    <div id="userSection" class="d-none">
        <h3>Products</h3>
        <ul id="productsList"></ul>
    </div>
</div>

<script>
    const users = [
        { id: 1, username: 'admin', password: 'admin123', email: 'admin@example.com', role: 'admin' },
        { id: 2, username: 'kasir1', password: 'kasir123', email: 'kasir1@example.com', role: 'kasir' },
        { id: 3, username: 'user1', password: 'user123', email: 'user1@example.com', role: 'pengguna' }
    ];

    const products = [
        { id: 1, name: 'Laptop', price: 1000.00, stock: 10 },
        { id: 2, name: 'Mouse', price: 20.00, stock: 50 }
    ];

    $(document).ready(function() {
        // Login form submission
        $('#loginForm').submit(function(e) {
            e.preventDefault();
            const username = $('#username').val();
            const password = $('#password').val();
            
            const user = users.find(u => u.username === username && u.password === password);
            if (user) {
                sessionStorage.setItem('user', JSON.stringify(user));
                if (user.role === 'admin') {
                    $('#adminSection').removeClass('d-none');
                    displayAdminUsers();
                } else if (user.role === 'pengguna') {
                    $('#userSection').removeClass('d-none');
                    displayProducts();
                }
            } else {
                alert('Invalid username or password!');
            }
        });

        // Register form submission
        $('#registerForm').submit(function(e) {
            e.preventDefault();
            const username = $('#regUsername').val();
            const email = $('#regEmail').val();
            const password = $('#regPassword').val();
            
            const newUser = { id: users.length + 1, username, password, email, role: 'pengguna' };
            users.push(newUser);
            sessionStorage.setItem('user', JSON.stringify(newUser));
            alert('User registered successfully!');
            $('#regUsername, #regEmail, #regPassword').val('');
        });

        function displayAdminUsers() {
            const adminUsersTable = $('#adminUsersTable');
            adminUsersTable.empty();
            users.forEach(user => {
                if (user.role === 'pengguna') {
                    adminUsersTable.append(`<tr>
                        <td>${user.username}</td>
                        <td>${user.email}</td>
                        <td>${user.role}</td>
                        <td>
                            <button class="btn btn-danger btn-sm" onclick="deleteUser(${user.id})">Delete</button>
                        </td>
                    </tr>`);
                }
            });
        }

        function deleteUser(userId) {
            const userIndex = users.findIndex(u => u.id === userId);
            if (userIndex > -1) {
                users.splice(userIndex, 1);
                displayAdminUsers();
                alert('User deleted successfully!');
            }
        }

        function displayProducts() {
            const productsList = $('#productsList');
            productsList.empty();
            products.forEach(product => {
                productsList.append(`<li>${product.name} - $${product.price} - Stock: ${product.stock}</li>`);
            });
        }
    });
</script>

</body>
</html>
